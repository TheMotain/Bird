# Fichier Makefile racine

# Cette variable contient la liste des sous répertoires
# pour lesquels il faudra construire un programme.
# Pour l'instant, seul le serveur web est dans la liste.
FOLDERS=webserver

# Indique à make les règles qui ne correspondent pas à la création
# d'un fichier
# make lancera toujours la construction de cette règle si elle est
# demandée, même si un fichier/répertoire du nom de la cible existe
# On indique ici la règle all ainsi que les répertoires
.PHONY: all $(FOLDERS)

# La règle qui sera exécutée si on lance make sans argument
all: $(FOLDERS)

# Cette règle va lanver make dans le répertoire webserver
# option -C de make
webserver:
	make -C webserver

# Ces variables servent à préciser le compilateur qui l'on veut utiliser
# ainsi que les paramètres de compilation
CC=gcc
LD=gcc
CFLAGS=-Wall -W -Werror
LDFLAGS=

# Le nom de l'exécutable à fabriquer
EXE=bird

# les variables HEADERS, CFILES et OBJS vont contenir respectivement
# la listes des fichier .h, .c et le nom des fichiers .o à fabriquer
# On utilise la directive particulière $(wildcard ...) qui permet
# de construire automatiquement une liste de fichiers
HEADERS=$(wildcard *.h)
CFILES=$(wildcard *.c)
# Cette construction de variable veut dire: remplacer la chaine ".c" par
# ".o" dans la variable CFILES
# Ceci nous permet de construire la liste des fichiers .o à fabriquer
OBJS=$(CFILES:.c=.o)

# Même utilisation que précédemment. On précise les règles qui
# ne fabrique pas de fichier du nom de leur cible
.PHONY: all clean mrproper

# 
