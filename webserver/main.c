#include <stdio.h>
#include <string.h>
#include "socket.h"
#include <unistd.h>       
#include <sys/socket.h>
#include <sys/types.h>
#include <stdlib.h>

int main()
{
  int socket_client;
  int socket_serveur;
  socket_serveur = creer_serveur(8000);
  while(1)
    {
    socket_client = accept(socket_serveur, NULL, NULL);
    if(socket_client == -1)
      {
	perror("accept");
	return 0;
      }

    const char message[] ="\n\n         ,--\"\"\"\",--.__,---[],-------.\n       ,\"   __,'            \\         \\--\"\"\"\"\"\"==;-\n     ,\" _,-\"  \"/---.___     \\       ___\\   ,-'',\"\n    /,-'      / ;. ,.--'-.__\\  _,-\"\" ,| `,'   /\n   /``\"\"\"\"-._/,-|:\\       []\\,' ```-/:;-. `. /\n             `  ;:::      ||       /:,;  `-.\\\n                =.,'__,---||-.____',.=\n                =(:\\_     ||__    ):)=\n               ,\"::::`----||::`--':::\"._\n             ,':::::::::::||::::::::::::'.\n    .__     ;:::.-.:::::__||___:::::.-.:::\\     __,\n       \"\"\"-;:::( O )::::>_|| _<::::( O )::::-\"\"\"\n   =======;:::::`-`:::::::||':::::::`-`:::::\\=======\n    ,--\"\";:::_____________||______________::::\"\"----.          , ,\n         ; ::`._(    |    |||     |   )_,'::::\\_,,,,,,,,,,____/,'_,\n       ,;    :::`--._|____[]|_____|_.-'::::::::::::::::::::::::);_\n      ;/ /      :::::::::,||,:::::::::::::::::::::::::::::::::::/\n     /; ``''''----------/,'/,__,,,,,____:::::::::::::::::::::,\"\n     ;/                :);/|_;| ,--.. . ```-.:::::::::::::_,\"\n    /;                :::):__,'//\"\"\\\\. ,--.. \\:::,:::::_,\"\n   ;/              :::::/ . . . . . . //\"\"\\\\. \\::\":__,\"\n   ;/          :::::::,' . . . . . . . . . . .:`::\\\n   ';      :::::::__,'. ,--.. . .,--. . . . . .:`::`\n   ';   __,..--'''-. . //\"\"\\\\. .//\"\"\\\\ . ,--.. :`:::`\n   ;    /  \\\\ .//\"\"\\\\ . . . . . . . . . //\"\"\\\\. :`::`\n   ;   /       . . . . . . . . . . . . . . . . .:`::`\n   ;   (          . . . . . . . . . . . . . . . ;:::`\n   ,:  ;,            . . . . . . . . . . . . . ;':::`\n   ,:  ;,             . . . . . . . . . . . . .;`:::\n   ,:   ;,             . . . . . . . . . . . . ;`::;`\n    ,:  ;             . . . . . . . . . . . . ;':::;`\n     :   ;             . . . . . . . . . . . ,':::;\n      :   '.          . . . . . . . .. . . .,':::;`\n       :    `.       . . . . . . . . . . . ;::::;`\n        '.    `-.   . . . . . . . . . . ,-'::::;\n          `:_    ``--..___________..--'':::::;'`\n             `._::,.:,.:,:_ctr_:,:,.::,.:_;'`\n________________`\"\\/\"\\/\\/'\"\"\"\"`\\/\"\\/\"\"\\/\"____________________________";
    write(socket_client, message, sizeof(message));
  }
  return 0;
}


